<!DOCTYPE html>
<html lang="fr-FR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Cinéma</title>
    
    <!-- Fontes do Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    
    <!-- CSS do Player Video.js -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />

    <style>
        /* --- Paleta de Cores e Estilo Geral --- */
        :root {
            --background-color: #F4F1E9;
            --text-color: #2C3E2A;
            --primary-color: #556B2F;
            --card-background: #FFFFFF;
            --shadow-color: rgba(44, 62, 42, 0.1);
            --font-serif: 'Lora', serif;
            --font-sans: 'Roboto', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: var(--font-sans);
            line-height: 1.7;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 0;
        }

        /* --- Cabeçalho --- */
        header {
            padding: 1.5rem 0;
            text-align: center;
        }

        header h1 {
            font-family: var(--font-serif);
            color: var(--text-color);
            font-size: 2rem;
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* --- Filme em Destaque --- */
        #hero-view {
            margin-bottom: 4rem;
            cursor: pointer;
        }

        .hero-container {
            position: relative;
            width: 100%;
            height: 50vh;
            min-height: 400px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
            padding: 2rem;
            border-radius: 4px;
            overflow: hidden;
            background-color: var(--shadow-color);
        }

        .hero-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 10%, transparent 50%);
        }

        .hero-content {
            position: relative;
            z-index: 2;
            color: #fff;
        }

        .hero-content h2 {
            font-family: var(--font-serif);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .hero-content p {
            font-size: 1rem;
            max-width: 60ch;
            font-weight: 300;
        }

        /* --- Galeria de Filmes --- */
        #gallery-view h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 400;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(44, 62, 42, 0.2);
            padding-bottom: 1rem;
        }

        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 2rem 1.5rem;
        }

        .movie-card {
            background-color: transparent;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .movie-card:hover {
            transform: scale(1.03);
        }

        .movie-card img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 4px;
            box-shadow: 0 5px 15px var(--shadow-color);
            background-color: var(--shadow-color);
        }

        .movie-card h3 {
            font-family: var(--font-sans);
            font-weight: 400;
            font-size: 1rem;
            margin-top: 0.75rem;
            text-align: center;
        }

        /* --- Leitor de Vídeo --- */
        #player-view {
            display: none;
        }

        .video-info {
            margin-top: 2rem;
        }

        .video-info h2 {
            font-family: var(--font-serif);
            font-size: 2.5rem;
        }

        .video-info p {
            font-size: 1.1rem;
            color: #555;
            margin-top: 0.5rem;
            max-width: 70ch;
        }

        .back-button {
            display: inline-block;
            background-color: transparent;
            color: var(--primary-color);
            padding: 12px 24px;
            border: 1px solid var(--primary-color);
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            margin-bottom: 2.5rem;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background-color: var(--primary-color);
            color: var(--background-color);
        }
        
        /* --- Personalização do Video.js --- */
        .video-js {
            font-family: var(--font-sans);
            width: 100%;
            height: auto;
            aspect-ratio: 16/9;
        }
        .vjs-default-skin .vjs-control-bar {
            background-color: rgba(44, 62, 42, 0.7);
        }
        .vjs-default-skin .vjs-big-play-button {
            background-color: rgba(44, 62, 42, 0.7);
            border-color: var(--background-color);
            border-radius: 50%;
            width: 2em;
            height: 2em;
            line-height: 2em;
            margin-top: -1em;
            margin-left: -1em;
        }
        .vjs-default-skin .vjs-play-progress,
        .vjs-default-skin .vjs-volume-level {
            background-color: var(--primary-color);
        }
        
        /* --- Rodapé --- */
        footer {
            text-align: center;
            padding: 2.5rem 0;
            margin-top: 2rem;
            border-top: 1px solid rgba(44, 62, 42, 0.2);
            color: #888;
            font-family: var(--font-serif);
        }
    </style>
</head>
<body>

    <header>
        <h1>Le Cinéma</h1>
    </header>

    <main class="container">
        
        <section id="hero-view"></section>

        <section id="gallery-view">
            <h2>Catalogue</h2>
            <div id="movie-grid" class="movie-grid"></div>
        </section>

        <section id="player-view">
            <button id="back-to-gallery" class="back-button">Retour au Catalogue</button>
            <video id="le-cinema-player" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto"></video>
            <div class="video-info">
                <h2 id="video-title"></h2>
                <p id="video-description"></p>
            </div>
        </section>
    </main>

    <footer>
        <p>Votre refuge cinématographique.</p>
    </footer>

    <!-- JS do Player Video.js -->
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const heroView = document.getElementById('hero-view');
            const galleryView = document.getElementById('gallery-view');
            const playerView = document.getElementById('player-view');
            const movieGrid = document.getElementById('movie-grid');
            const videoTitle = document.getElementById('video-title');
            const videoDescription = document.getElementById('video-description');
            const backToGalleryBtn = document.getElementById('back-to-gallery');

            // --- Catálogo de Filmes ---
            const allMovies = [
               {
                "title": "Vampyros Lesbos (1971)",
                "description": "Linda est une jeune avocate américaine travaillant dans un cabinet d'avocats à Istanbul...",
                "poster": "https://firebasestorage.googleapis.com/v0/b/le-cinema-2e808.firebasestorage.app/o/Vampyros%20Lesbos%20(1971)%2F41057-vampyros-lesbos-0-1000-0-1500-crop.jpg?alt=media&token=faa84360-fd21-4185-aba8-d960cbb53ced",
                "videoUrl": "https://firebasestorage.googleapis.com/v0/b/le-cinema-2e808.firebasestorage.app/o/Vampyros%20Lesbos%20(1971)%2FVampyros.Lesbos.1971.720p.BluRay.x264.AAC-%5BYTS.MX%5D.mp4?alt=media&token=47193784-a6be-4800-9f05-6c9a00f96283",
                "subtitleUrl": "https://firebasestorage.googleapis.com/v0/b/le-cinema-2e808.firebasestorage.app/o/Vampyros%20Lesbos%20(1971)%2F%5BSubtitleTools.com%5D%20Vampyros%20Lesbos.vtt?alt=media&token=7cbf2cfa-6435-407a-a5c4-a339fb8f9c48"
              },
              {
                "title": "Reprise (2006)",
                "description": "Deux amis compétitifs, nourris par des aspirations littéraires et l'exubérance de la jeunesse...",
                "poster": "https://firebasestorage.googleapis.com/v0/b/le-cinema-2e808.firebasestorage.app/o/Reprise%20(2006)%2F44710-reprise-0-2000-0-3000-crop.jpg?alt=media&token=60928198-07c9-47cd-a8bb-ed863f4a3de3",
                "videoUrl": "https://firebasestorage.googleapis.com/v0/b/le-cinema-2e808.firebasestorage.app/o/Reprise%20(2006)%2FReprise.2006.1080p.BluRay.x264.AAC5.1-%5BYTS.MX%5D.mp4?alt=media&token=048985f9-89d2-4b07-ac68-18037954f30a",
                "subtitleUrl": "https://firebasestorage.googleapis.com/v0/b/le-cinema-2e808.firebasestorage.app/o/Reprise%20(2006)%2F%5BSubtitleTools.com%5D%20Reprise.2006.1080p.BluRay.x264.AAC5.vtt?alt=media&token=be296e61-e1c5-466a-8ccb-0aa45621ab8a"
              }
            ];
            
            // --- Inicialização do Video.js ---
            const player = videojs('le-cinema-player', {
                controls: true,
                autoplay: false,
                preload: 'auto'
            });

            // --- Funções da Aplicação ---
            function initializeApp() {
                if (allMovies && allMovies.length > 0) {
                    displayHero(allMovies[0]);
                    displayMovies(allMovies);
                }
            }
            
            function displayHero(movie) {
                heroView.innerHTML = `
                    <div class="hero-container" style="background-image: url('${movie.poster}')">
                        <div class="hero-content">
                            <h2>${movie.title}</h2>
                            <p>${movie.description}</p>
                        </div>
                    </div>
                `;
                heroView.addEventListener('click', () => showPlayer(movie));
            }

            function displayMovies(movies) {
                movieGrid.innerHTML = '';
                movies.forEach(movie => {
                    const card = document.createElement('div');
                    card.className = 'movie-card';
                    card.innerHTML = `
                        <img src="${movie.poster}" alt="Affiche de ${movie.title}" onerror="this.onerror=null;this.src='https://placehold.co/400x600/F4F1E9/2C3A2A?text=Affiche';">
                        <h3>${movie.title}</h3>
                    `;
                    card.addEventListener('click', () => showPlayer(movie));
                    movieGrid.appendChild(card);
                });
            }
            
            function showPlayer(movieData) {
                heroView.style.display = 'none';
                galleryView.style.display = 'none';
                playerView.style.display = 'block';

                videoTitle.textContent = movieData.title;
                videoDescription.textContent = movieData.description;
                
                // Limpa legendas antigas
                const existingTracks = player.remoteTextTracks();
                let i = existingTracks.length;
                while (i--) {
                    player.removeRemoteTextTrack(existingTracks[i]);
                }

                // Define a nova fonte de vídeo
                player.src({ src: movieData.videoUrl, type: 'video/mp4' });

                // Adiciona a nova legenda, se existir e o link não for um placeholder
                if (movieData.subtitleUrl && !movieData.subtitleUrl.includes('URL_DA_SUA_LEGENDA')) {
                    player.addRemoteTextTrack({
                        kind: 'subtitles',
                        src: movieData.subtitleUrl,
                        srclang: 'fr',
                        label: 'Français',
                        default: true
                    }, false);
                }

                player.load();
                player.play();
                
                window.scrollTo(0, 0);
            }

            function showGallery() {
                playerView.style.display = 'none';
                heroView.style.display = 'block';
                galleryView.style.display = 'block';
                
                player.pause();
            }

            backToGalleryBtn.addEventListener('click', showGallery);

            initializeApp();
        });
    </script>
</body>
</html>

